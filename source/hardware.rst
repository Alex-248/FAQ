.. Fedora-Faq-Ru (c) 2018 - 2019, EasyCoding Team and contributors
.. 
.. Fedora-Faq-Ru is licensed under a
.. Creative Commons Attribution-ShareAlike 4.0 International License.
.. 
.. You should have received a copy of the license along with this
.. work. If not, see <https://creativecommons.org/licenses/by-sa/4.0/>.
.. _hardware:

**************************************************************
Вопросы, связанные с использованием различного оборудования
**************************************************************

.. index:: hardware, selection
.. _linux-hardware:

На что в первую очередь следует обратить внимание при выборе ноутбука для Linux?
====================================================================================

 1. Следует обратить внимание на производителя :ref:`установленного Wi-Fi модуля <wifi-chip>`.
 2. Не рекомендуется приобретать устройства с гибридной графикой ибо технология NVIDIA Optimus в настоящее время не поддерживается под GNU/Linux официально и работает исключительно посредством Bumblebee от сторонних разработчиков, который часто работает нестабильно.
 3. Ни при каком условии не приобретать ноутбук с видеокартой :ref:`NVIDIA GeForce GTX 1050 <nvidia-gtx1050>`.
 4. Перед покупкой рекомендуется исследовать работу :ref:`свежего Fedora Live USB <download>` непосредственно на данном устройстве, а также проверить :ref:`вывод dmesg <journal-current>` на наличие ошибок ACPI.

.. index:: hardware, firmware, update
.. _fedora-fwupd:

Как обновить прошивку UEFI BIOS и других устройств непосредственно из Fedora?
==================================================================================

Для оперативного обновления микропрограмм (прошивок) существует утилита `fwupd <https://github.com/hughsie/fwupd>`__:

.. code-block:: bash

    sudo dnf install fwupd

Внимание! Для работы fwupd система должна быть установлена строго в :ref:`UEFI режиме <uefi-boot>`.

Обновление базы данных программы:

.. code-block:: bash

    fwupdmgr refresh

Вывод списка устройств, микропрограмма которых может быть обновлена:

.. code-block:: bash

    fwupdmgr get-devices

Проверка наличия обновлений с выводом подробной информации о каждом из них:

.. code-block:: bash

    fwupdmgr get-updates

Установка обнаруженных обновлений микропрограмм:

.. code-block:: bash

    fwupdmgr update

Некоторые устройства могут быть обновлены лишь при следующей загрузке системы, поэтому выполним перезагрузку:

.. code-block:: bash

    sudo systemctl reboot

.. index:: wi-fi, chipset, hardware, selection
.. _wifi-chip:

Какие модули Wi-Fi корректно работают в Linux?
===================================================

Без проблем работают Wi-Fi модули следующих производителей:

 * Qualcomm Atheros (однако ath10k требуют загрузки прошивок из комплекта поставки ядра);
 * Intel Wireless (требуют загрузки индивидуальных прошивок iwl из поставки ядра).

Работают 50/50:

 * Realtek (широко известны проблемы с чипами серий rtl8192cu и rtl8812au);
 * MediaTek (ранее назывался Ralink).

Не работают:

 * Broadcom (для их работы необходима установка :ref:`проприетарных драйверов <broadcom-drivers>`, которые часто ведут себя непредсказуемо и могут вызывать сбои в работе ядра системы).

.. index:: nvidia, gtx1050, video card
.. _nvidia-gtx1050:

В моём ноутбуке установлена видеокарта NVIDIA GeForce GTX 1050 и после запуска система зависает. Что делать?
================================================================================================================

Случайные зависания системы, неработоспособность тачпада и других USB устройств - это следствие сбоев при работе свободного драйвера nouveau на данной видеокарте.

В качестве решения необходимо установить проприетарные драйверы по такому алгоритму:

 1. произвести чистую установку систему со :ref:`свежего Fedora Live USB <download>` (respin);
 2. войти в систему, установить все обновления и, **не перезагружаясь**, выполнить установку :ref:`проприетарных драйверов <nvidia-drivers>` Optimus по **альтернативному варианту**.
 3. выполнить перезагрузку системы.

Если всё сделано верно, то система начнёт функционировать в штатном режиме. В противном случае следует повторить с самого начала.

.. index:: drivers, disable driver
.. _driver-disable:

Как можно навсегда отключить определённый драйвер устройства?
================================================================

Чтобы навсегда отключить какой-то драйвер в Linux, необходимо создать файл в каталоге **/etc/modprobe.d** с любым именем, например **disable-nv.conf**, и примерно таким содержанием:

.. code-block:: text

    install nouveau /bin/false

Здесь вместо **nouveau** нужно указать реально используемые устройством драйверы.

Полный список загруженных драйверов можно получить так:

.. code-block:: bash

    lspci -nnk

Теперь необходимо пересобрать inird образ:

.. code-block:: bash

    sudo dracut --force

Чтобы отменить действие, достаточно удалить созданный файл и снова пересобрать initrd.

.. index:: wi-fi, rfkill, wireless
.. _rfkill-status:

Модуль настройки сети не отображает беспроводных устройств. Что делать?
===========================================================================

Для начала воспользуемся утилитой **rfkill** для того, чтобы определить состояние беспроводных модулей:

.. code-block:: bash

    rfkill

Статус **hard blocked** означает, что устройство отключено аппаратно и требуется включить его определённой последовательностью **Fn + Fx** (см. руководство ноутбука).

Статус **soft blocked** означает, что устройство отключено программно, например режимом *В самолёте*.

.. index:: wi-fi, rfkill, wireless
.. _rfkill-wifi:

Как программно включить или отключить беспроводной модуль Wi-Fi?
===================================================================

Снимем программную блокировку Wi-Fi и активируем модуль:

.. code-block:: bash

    rfkill unblock wlan

Установим программную блокировку Wi-Fi и отключим модуль:

.. code-block:: bash

    rfkill block wlan

.. index:: bluetooth, rfkill, wireless
.. _rfkill-bluetooth:

Как программно включить или отключить беспроводной модуль Bluetooth?
=======================================================================

Снимем программную блокировку Bluetooth и активируем модуль:

.. code-block:: bash

    rfkill unblock bluetooth

Установим программную блокировку Bluetooth и отключим модуль:

.. code-block:: bash

    rfkill block bluetooth

.. index:: lte, rfkill, wireless
.. _rfkill-lte:

Как программно включить или отключить беспроводной модуль LTE (4G)?
======================================================================

Снимем программную блокировку LTE (4G) и активируем модуль:

.. code-block:: bash

    rfkill unblock wwan

Установим программную блокировку LTE (4G) и отключим модуль:

.. code-block:: bash

    rfkill block wwan

.. index:: com, rs-232, port, screen
.. _screen-com:

Как правильно работать с COM портами (RS-232)?
==================================================

Для работы с COM портами (RS-232) можно применять следующие утилиты:

 * screen;
 * putty.

Воспользуемся утилитой **screen** для подключения к последовательному порту:

.. code-block:: bash

    screen /dev/ttyS0 115200

Здесь **/dev/ttyS0** - путь к первому COM порту в системе, а **115200** - скорость работы в бодах.

Если при подключении вместо текста отображается различный мусор, значит скорость указана не правильно и её следует либо подбирать экспериментально, либо получить из руководства.

Для завершения сессии следует нажать **Ctrl + A** и **k**.

.. index:: monitor, resolution, xorg, x11, dac, dhmi, d-sub, vga
.. _dac-ddc:

При подключении монитора через переходник отображается неправильное разрешение. Как исправить?
==================================================================================================

Большинство "переходников" из цифры в аналог (DVI-D -> D-SUB, HDMI -> D-SUB и т.д.) не передают данные с монитора о поддерживаемых им разрешениях экрана системе посредством протокола `Display Data Channel (DDC) <https://ru.wikipedia.org/wiki/Display_Data_Channel>`__, поэтому существует два решения:

 * не использовать подобные устройства (к тому же они значительно ухудшают качество изображения);
 * прописать поддерживаемые разрешения самостоятельно в конфиге X11.
